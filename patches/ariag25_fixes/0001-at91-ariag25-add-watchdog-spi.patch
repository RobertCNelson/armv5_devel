From 6efd8db7a46154c3668ba6eeb7df9510ccc41a24 Mon Sep 17 00:00:00 2001
From: Douglas Gilbert <[mailto:dgilbert@interlog.com]>
Date: Thu, 16 May 2013 14:12:57 -0500
Subject: [PATCH] at91: ariag25: add watchdog & spi

Signed-off-by: Douglas Gilbert <dgilbert@interlog.com>
Signed-off-by: Robert Nelson <robertcnelson@gmail.com>
---
 arch/arm/boot/dts/at91-ariag25.dts |   43 ++++++++++++++++++++++++++++++++----
 1 file changed, 39 insertions(+), 4 deletions(-)

diff --git a/arch/arm/boot/dts/at91-ariag25.dts b/arch/arm/boot/dts/at91-ariag25.dts
index d5f674f..532d113 100644
--- a/arch/arm/boot/dts/at91-ariag25.dts
+++ b/arch/arm/boot/dts/at91-ariag25.dts
@@ -121,6 +121,34 @@
 				status = "okay";
 			};
 
+                        spi0: spi@f0000000 {
+                                status = "okay";
+                                cs-gpios = <&pioA 14 0>, <0>, <0>, <0>;
+                                // anything@0 {
+                                        // compatible = "spidev";
+                                        // // spi-max-frequency = <50000000>;
+                                        // spi-max-frequency = <1000000>;
+                                        // reg = <0>;
+                                // };
+                                // m25p80@0 {
+                                        // compatible = "spidev";
+                                        // spi-max-frequency = <50000000>;
+                                        // reg = <0>;
+                                // };
+
+                                mmc-slot@0 {
+                                        compatible = "mmc-spi-slot";
+                                        reg = <0>;
+                                        voltage-ranges = <3300 3300>;
+                                        // Use one of next 3 lines, comment out other 2
+                                        gpios = <&pioA 26 0>;    /* CD to PA26 */
+                                        // broken-cd;
+                                        // non-removable;
+                                        cd-inverted;
+                                        spi-max-frequency = <8000000>;
+                                 };
+                        };
+
 			adc0: adc@f804c000 {
 				status = "okay";
 				atmel,adc-channels-used = <0xf>;
@@ -138,6 +166,17 @@
 					};
 				};
 			};
+
+			rtc@fffffeb0 {
+				status = "okay";
+			};
+
+			watchdog@fffffe40 {
+				compatible = "atmel,at91sam9260-wdt";
+				reg = <0xfffffe40 0x10>;
+				timeout-sec = <14>;
+				status = "okay";
+			};
 		};
 
 		usb0: ohci@00600000 {
@@ -162,10 +201,6 @@
 
 	};
 
-	rtc@fffffeb0 {
-		status = "okay";
-	};
-
 	onewire@0 {
 		compatible = "w1-gpio";
 		gpios = <&pioA 21 1>;
-- 
1.7.10.4

